# Makefile para el proyecto Buscador de Subvenciones

# --- Variables ---
PYTHON = python3

# --- Reglas Phony ---
# Declara los objetivos que no son nombres de archivos.
.PHONY: all lint clean start

all: start

# --- Objetivos ---

# Ejecuta el linter (flake8) en el directorio de cÃ³digo fuente.
# NecesitarÃ¡s instalar flake8: pip install flake8
lint:
	@echo "ðŸ”Ž  Ejecutando linter (flake8) en el cÃ³digo fuente..."
	$(PYTHON) -m flake8

# Limpia los archivos de cachÃ© de Python.
clean:
	@echo "ðŸ§¹  Limpiando archivos de cachÃ© (.pyc) y directorios (__pycache__)..."
	find . -type f -name "*.py[co]" -delete
	find . -type d -name "__pycache__" -exec rm -rf {} +
	@echo "âœ¨  Limpieza completada."

seed:
	@echo "ðŸŒ± Cargando los prompts en Opik"
	@echo "AsegÃºrate de que la base de datos estÃ© configurada correctamente."
	@echo "Coming soon: ImplementaciÃ³n de la carga de prompts en Opik."

start_mcp_servers:
	@echo "ðŸš€ Iniciando los servidores MCP..."
	cd mcp
	$(PYTHON) info_convocatoria_mcp.py &
	cd ..
	
# Inicia la aplicaciÃ³n Flask.
start:
	@echo "ðŸš€  Iniciando la aplicaciÃ³n Flask..."
	@echo "Puedes acceder a la aplicaciÃ³n en http://127.0.0.1:5000"
	$(PYTHON) main.py